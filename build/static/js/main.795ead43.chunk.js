(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{22:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),s=n(17),a=n.n(s),o=(n(22),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))}),l=n(7),u=n(3),i=n.n(u),d=n(5),b=n(6),j=n(4),p=n.n(j),x="/api/persons",h=null,m={getAll:function(){return p.a.get(x)},create:function(){var e=Object(d.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,p.a.post(x,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return p.a.put("".concat(x,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){h="bearer ".concat(e)},deleteItem:function(e){return p.a.delete("".concat(x,"/").concat(e))}},f={login:function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("http://localhost:3002/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=n(0),O=function(){return Object(g.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:14},children:[Object(g.jsx)("br",{}),Object(g.jsxs)("em",{children:["fullstack Demo by",Object(g.jsx)("a",{href:"https://github.com/SikeX/sikex.github.io",class:"text-blue-600 hover:underline",children:"@Sike"}),Object(g.jsx)("br",{}),"FrontEnd: React",Object(g.jsx)("br",{}),"BackEnd: NodeJs",Object(g.jsx)("br",{}),"DataBase: MongoDB"]})]})},v=function(e){var t=e.content,n=e.deleteItem;return console.log(t),Object(g.jsx)("tbody",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:t.name}),Object(g.jsx)("td",{children:t.number}),Object(g.jsx)("td",{children:Object(g.jsx)("button",{class:"hover:bg-yellow-400 bg-yellow-200  rounded-md text-sm px-1 mx-1",onClick:n,children:"delete"})})]})})},y=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)({name:"",number:""}),a=Object(b.a)(s,2),o=a[0],u=a[1],j=Object(r.useState)(""),p=Object(b.a)(j,2),x=p[0],h=p[1],y=Object(r.useState)(""),w=Object(b.a)(y,2),k=w[0],S=w[1],C=Object(r.useState)(null),I=Object(b.a)(C,2),B=I[0],D=I[1];Object(r.useEffect)((function(){m.getAll().then((function(e){console.log("get success!"),c(e.data)}))}),[]),console.log("item get from server:",n);var F=function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.login({username:x,password:k});case 4:n=e.sent,console.log(n),m.setToken(n.token),D(n),h(""),S(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),setTimeout((function(){console.log("wrong credentials")}),5e3);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e){u(Object(l.a)(Object(l.a)({},o),{},{name:e.target.value}))},A=function(e){u(Object(l.a)(Object(l.a)({},o),{},{number:e.target.value}))},E=function(e){e.preventDefault(),""!==o.name?""!==o.number?m.create(o).then((function(e){c(n.concat(o)),u({name:"",number:""})})):alert("please input number"):alert("please input name")};return console.log("newItem",o),Object(g.jsxs)("div",{class:"absolute h-full w-full mx-auto px-1 bg-green-200 md:px-20 lg:px-40",children:[Object(g.jsx)("div",{class:"bg-gray-500 rounded-md text-3xl text-white subpixel-antialiased px-2 py-1",children:"PhoneBook"}),null===B?Object(g.jsxs)("div",{class:"max-w-md bg-yellow-500 rounded-xl shadow-md my-1 px-2 py-1",children:[Object(g.jsx)("h1",{class:"text-2xl",children:"Login"}),Object(g.jsxs)("form",{onSubmit:F,children:[Object(g.jsxs)("div",{class:"py-1",children:["username:",Object(g.jsx)("input",{class:"focus:border-blue-400 focus:ring-1  border focus:ring-blue-500 focus:outline-none border-gray-200 rounded-md placeholder-gray-400 px-2 ml-1",type:"text",value:x,name:"Username",onChange:function(e){var t=e.target;return h(t.value)}})]}),Object(g.jsxs)("div",{class:"py-1",children:["password:",Object(g.jsx)("input",{class:"focus:border-blue-400 focus:ring-1  border focus:ring-blue-500 focus:outline-none border-gray-200 rounded-md placeholder-gray-400 px-2 ml-1",type:"password",value:k,name:"Password",onChange:function(e){var t=e.target;return S(t.value)}})]}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{class:"bg-indigo-300 hover:bg-indigo-500 rounded-md px-4 py-1",type:"submit",children:"login"})})]})]}):Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{class:"text-blue-600 px-2 py-1",children:["Hello ",B.username," !"]}),Object(g.jsxs)("div",{class:"max-w-md bg-yellow-200 rounded-xl shadow-md my-1 px-2 py-1",children:[Object(g.jsx)("h1",{class:"text-2xl",children:"Add a new"}),Object(g.jsx)("form",{class:"relative",children:Object(g.jsxs)("div",{class:"py-1",children:["name:",Object(g.jsx)("input",{class:"focus:border-blue-400 focus:ring-1  border focus:ring-blue-500 focus:outline-none border-gray-200 rounded-md placeholder-gray-400 px-2 ml-1",placeholder:"input name",value:o.name,onChange:T})]})}),Object(g.jsxs)("form",{class:"relative",onSubmit:E,children:[Object(g.jsxs)("div",{class:"py-1",children:["number:",Object(g.jsx)("input",{class:"focus:border-blue-400 focus:ring-1  border focus:outline-none border-gray-200 rounded-md placeholder-gray-400 px-2 ml-1",placeholder:"input number",value:o.number,onChange:A})]}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{class:"bg-indigo-300 hover:bg-indigo-500 rounded-md px-4 py-1",type:"submit",children:"add"})})]})]})]}),Object(g.jsxs)("div",{class:"max-w-md my-2 bg-blue-200 rounded-xl shadow-md px-2 py-1",children:[Object(g.jsx)("h1",{class:"text-2xl",children:"Number"}),Object(g.jsx)("table",{class:"table-auto",children:n.map((function(e,t){return Object(g.jsx)(v,{content:e,deleteItem:function(){return t=e.id,void(null!==B?m.deleteItem(t).then((function(e){c(n.filter((function(e){return e.id!==t})))})):alert("you dont have the acess to delete!\nplease log in"));var t}},t)}))})]}),Object(g.jsx)(O,{})]})};a.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(y,{})}),document.getElementById("root")),o()}},[[43,1,2]]]);
//# sourceMappingURL=main.795ead43.chunk.js.map